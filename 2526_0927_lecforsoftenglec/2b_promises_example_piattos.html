<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Piattos Purchase</title>
</head>
<body>
  <h2>Buy Piattos Chips (45 PHP ONLY)</h2>
  <p><img src="https://imartgrocersph.com/wp-content/uploads/2020/09/Piattos-Sour-Cream-and-Onion-85g.png" alt="" width="300" height="300"></p>
  <label for="cash">Cash (PHP): </label>
  <input type="number" id="cash" min="0" step="0.01" /><br /><br />
  <label for="quantity">Quantity: </label>
  <input type="number" id="quantity" min="1" step="1" /><br /><br />
  <button id="submit-btn">Confirm Purchase</button>

  <p id="result"></p>

  <script>
    const pricePerChips = 45;

    function processPurchase(cash, quantity) {
      return new Promise((resolve, reject) => {
        const totalCost = pricePerChips * quantity;
        
        // Simulate async operation for demonstration
        setTimeout(() => {
          if (cash >= totalCost) {
            resolve({
              success: true,
              change: cash - totalCost,
              totalCost,
            });
          } else {
            reject({
              success: false,
              message: "Insufficient cash. Please provide enough money."
            });
          }
        }, 300);
      });
    }

    document.getElementById('submit-btn').addEventListener('click', () => {
      const cashValue = parseFloat(document.getElementById('cash').value);
      const quantityValue = parseInt(document.getElementById('quantity').value);

      const resultElem = document.getElementById('result');

      if (isNaN(cashValue) || cashValue < 0) {
        resultElem.textContent = "Please enter a valid cash amount.";
        return;
      }

      if (isNaN(quantityValue) || quantityValue < 1) {
        resultElem.textContent = "Please enter a valid quantity (minimum 1).";
        return;
      }

      processPurchase(cashValue, quantityValue)
        .then(({ change, totalCost }) => {
          resultElem.textContent = `Transaction successful! Total cost: ${totalCost} PHP. Your change is ${change.toFixed(2)} PHP.`;
        })
        .catch(({ message }) => {
          resultElem.textContent = message;
        });
    });
  </script>
</body>
</html>
