<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Piattos Purchase</title>
</head>
<body>
  <h2>Buy Piattos Chips (45 PHP ONLY)</h2>
  <p><img src="https://imartgrocersph.com/wp-content/uploads/2020/09/Piattos-Sour-Cream-and-Onion-85g.png" 
    alt="" width="300" height="300"></p> 
  <form id="purchaseForm">
    <label for="cash">Cash (PHP): </label>
    <input type="number" id="cash" name="cash" min="0" step="0.01" required />
    <br/><br/>
    <label for="quantity">Quantity: </label>
    <input type="number" id="quantity" name="quantity" min="1" required />
    <br/><br/>
    <button type="submit">Confirm Purchase</button>
  </form>
  <p id="message"></p>

  <script>
    const pricePerPiattos = 45;

    document.getElementById('purchaseForm').addEventListener('submit', async (event) => {
      event.preventDefault();

      const cashInput = document.getElementById('cash').value;
      const quantityInput = document.getElementById('quantity').value;

      const cash = parseFloat(cashInput);
      const quantity = parseInt(quantityInput);

      const messageEl = document.getElementById('message');

      async function processTransaction(cash, quantity) {
        return new Promise((resolve) => {
          setTimeout(() => {
            const totalCost = pricePerPiattos * quantity;
            if(cash >= totalCost) {
              const change = cash - totalCost;
              resolve({ success: true, change: change.toFixed(2) });
            } else {
              resolve({ success: false, needed: (totalCost - cash).toFixed(2) });
            }
          }, 300); // simulate async delay
        });
      }

      const result = await processTransaction(cash, quantity);

      if(result.success) {
        messageEl.textContent = `Transaction successful! Your change is ₱${result.change}.`;
      } else {
        messageEl.textContent = `Insufficient cash. You need an additional ₱${result.needed}.`;
      }
    });
  </script>
</body>
</html>
